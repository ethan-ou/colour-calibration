(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();function W(t=16,n="display-p3",e=2){if(t<2)throw Error("Quantity per channel cannot be lower than 2.");const r=Array.from({length:t},(a,i)=>i/(t-1)),o=[];for(let a of r)for(let i of r)for(let c of r){const u=(a+i+c)/3,l=a-u,d=i-u,m=c-u,f=Math.sqrt(l*l+d*d+m*m);let T=a,M=i,I=c;if(f>0){const w=Math.pow(f,e)/f;T=u+l*w,M=u+d*w,I=u+m*w}o.push(h(Math.max(0,Math.min(1,T)),Math.max(0,Math.min(1,M)),Math.max(0,Math.min(1,I)),n))}return o}function Q(t=3,n="display-p3"){const e=[];for(let r=0;r<t;r++)e.push(h(1,1,1,n)),e.push(h(0,0,0,n));return e.push(h(1,1,1,n)),e}function h(t,n,e,r){return`color(${r} ${t.toFixed(6)} ${n.toFixed(6)} ${e.toFixed(6)})`}const U=t=>(n,e)=>(t.set(n,e),e),P=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,q=536870912,x=q*2,$=(t,n)=>e=>{const r=n.get(e);let o=r===void 0?e.size:r<x?r+1:0;if(!e.has(o))return t(e,o);if(e.size<q){for(;e.has(o);)o=Math.floor(Math.random()*x);return t(e,o)}if(e.size>P)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;e.has(o);)o=Math.floor(Math.random()*P);return t(e,o)},_=new WeakMap,G=U(_),b=$(G,_),D=t=>typeof t.start=="function",S=new WeakMap,j=t=>({...t,connect:({call:n})=>async()=>{const{port1:e,port2:r}=new MessageChannel,o=await n("connect",{port:e},[e]);return S.set(r,o),r},disconnect:({call:n})=>async e=>{const r=S.get(e);if(r===void 0)throw new Error("The given port is not connected.");await n("disconnect",{portId:r})},isSupported:({call:n})=>()=>n("isSupported")}),y=new WeakMap,z=t=>{if(y.has(t))return y.get(t);const n=new Map;return y.set(t,n),n},X=t=>{const n=j(t);return e=>{const r=z(e);e.addEventListener("message",(({data:c})=>{const{id:u}=c;if(u!==null&&r.has(u)){const{reject:l,resolve:d}=r.get(u);r.delete(u),c.error===void 0?d(c.result):l(new Error(c.error.message))}})),D(e)&&e.start();const o=(c,u=null,l=[])=>new Promise((d,m)=>{const f=b(r);r.set(f,{reject:m,resolve:d}),u===null?e.postMessage({id:f,method:c},l):e.postMessage({id:f,method:c,params:u},l)}),a=(c,u,l=[])=>{e.postMessage({id:null,method:c,params:u},l)};let i={};for(const[c,u]of Object.entries(n))i={...i,[c]:u({call:o,notify:a})};return{...i}}},H=t=>n=>e=>{typeof t.get(e)=="symbol"&&(t.set(e,null),n(e).then(()=>{t.delete(e)}))},K=t=>n=>e=>{typeof t.get(e)=="symbol"&&(t.set(e,null),n(e).then(()=>{t.delete(e)}))},Y=(t,n)=>e=>(r,o=0,...a)=>{const i=Symbol(),c=t(n);n.set(c,i);const u=()=>e(o,c).then(()=>{const l=n.get(c);if(l===void 0)throw new Error("The timer is in an undefined state.");l===i&&(r(...a),n.get(c)===i&&u())});return u(),c},J=(t,n)=>e=>(r,o=0,...a)=>{const i=Symbol(),c=t(n);return n.set(c,i),e(o,c).then(()=>{const u=n.get(c);if(u===void 0)throw new Error("The timer is in an undefined state.");u===i&&(n.delete(c),r(...a))}),c},N=new Map([[0,null]]),B=new Map([[0,null]]),V=H(N),Z=K(B),ee=Y(b,N),te=J(b,B),ne=X({clearInterval:({call:t})=>V(n=>t("clear",{timerId:n,timerType:"interval"})),clearTimeout:({call:t})=>Z(n=>t("clear",{timerId:n,timerType:"timeout"})),setInterval:({call:t})=>ee((n,e)=>t("set",{delay:n,now:performance.timeOrigin+performance.now(),timerId:e,timerType:"interval"})),setTimeout:({call:t})=>te((n,e)=>t("set",{delay:n,now:performance.timeOrigin+performance.now(),timerId:e,timerType:"timeout"}))}),re=t=>{const n=new Worker(t);return ne(n)},oe=(t,n)=>{let e=null;return()=>{if(e!==null)return e;const r=new Blob([n],{type:"application/javascript; charset=utf-8"}),o=URL.createObjectURL(r);return e=t(o),setTimeout(()=>URL.revokeObjectURL(o)),e}},se=`(()=>{var e={455:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,u=r(i),c=a(u,i),l=t(c);e.addUniqueNumber=l,e.generateUniqueNumber=c}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{"use strict";const e=-32603,t=-32602,n=-32601,o=(e,t)=>Object.assign(new Error(e),{status:t}),s=t=>o('The handler of the method called "'.concat(t,'" returned an unexpected result.'),e),a=(t,r)=>async({data:{id:a,method:i,params:u}})=>{const c=r[i];try{if(void 0===c)throw(e=>o('The requested method called "'.concat(e,'" is not supported.'),n))(i);const r=void 0===u?c():c(u);if(void 0===r)throw(t=>o('The handler of the method called "'.concat(t,'" returned no required result.'),e))(i);const l=r instanceof Promise?await r:r;if(null===a){if(void 0!==l.result)throw s(i)}else{if(void 0===l.result)throw s(i);const{result:e,transferables:r=[]}=l;t.postMessage({id:a,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:a})}};var i=r(455);const u=new Map,c=(e,r,n)=>({...r,connect:({port:t})=>{t.start();const n=e(t,r),o=(0,i.generateUniqueNumber)(u);return u.set(o,()=>{n(),t.close(),u.delete(o)}),{result:o}},disconnect:({portId:e})=>{const r=u.get(e);if(void 0===r)throw(e=>o('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),t))(e);return r(),{result:null}},isSupported:async()=>{if(await new Promise(e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=({data:t})=>e(null!==t),n.postMessage(t,[t])})){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),l=(e,t,r=()=>!0)=>{const n=c(l,t,r),o=a(e,n);return e.addEventListener("message",o),()=>e.removeEventListener("message",o)},d=(e,t)=>r=>{const n=t.get(r);if(void 0===n)return Promise.resolve(!1);const[o,s]=n;return e(o),t.delete(r),s(!1),Promise.resolve(!0)},f=(e,t,r,n)=>(o,s,a)=>{const i=o+s-t.timeOrigin,u=i-t.now();return new Promise(t=>{e.set(a,[r(n,u,i,e,t,a),t])})},m=new Map,h=d(globalThis.clearTimeout,m),p=new Map,v=d(globalThis.clearTimeout,p),w=((e,t)=>{const r=(n,o,s,a)=>{const i=n-e.now();i>0?o.set(a,[t(r,i,n,o,s,a),s]):(o.delete(a),s(!0))};return r})(performance,globalThis.setTimeout),g=f(m,performance,globalThis.setTimeout,w),T=f(p,performance,globalThis.setTimeout,w);l(self,{clear:async({timerId:e,timerType:t})=>({result:await("interval"===t?h(e):v(e))}),set:async({delay:e,now:t,timerId:r,timerType:n})=>({result:await("interval"===n?g:T)(e,t,r)})})})()})();`,F=oe(re,se),ae=t=>F().clearTimeout(t),C=(...t)=>F().setTimeout(...t);function O(t,n){let e=new Date().getTime()+n,r=null;const o=function(){return e+=n,r=C(o,e-new Date().getTime()),t()},a=function(){if(r!==null)return ae(r)};return r=C(o,e-new Date().getTime()),{cancel:a}}const E=document.getElementById("background"),ce=document.getElementById("status"),p=document.getElementById("colorSpace"),L=document.getElementById("colourPatchesPerChannel"),ue=document.getElementById("colourPatchesInfo"),g=document.getElementById("fullscreenButton"),ie=document.getElementById("settingsButton"),R=document.getElementById("settingsDialog"),le=document.getElementById("closeDialog"),v=document.querySelector('[data-mode="patchesRemaining"]'),s={colorSpace:de(),colourPatchesPerChannel:20,interval:200,running:!1,preQueueIdx:0,queueIdx:0,preQueue:[],queue:[]};ce.addEventListener("click",t=>{const n=t.target,{mode:e}=n.dataset;switch(e){case"start":fe();break;case"stop":k();break}});g.addEventListener("click",()=>{me()});ie.addEventListener("click",()=>{R.showModal()});le.addEventListener("click",()=>{R.close()});p.addEventListener("change",t=>{const n=t.target;pe(n.value)});L.addEventListener("change",t=>{const n=t.target;ge(parseInt(n.value))});function de(){return window.matchMedia("(color-gamut: rec2020)").matches?"rec2020":window.matchMedia("(color-gamut: p3)").matches?"display-p3":"srgb"}function fe(){if(s.running===!0)return;const t=()=>new Promise(e=>{s.preQueue=Q(3,s.colorSpace);const r=O(()=>{s.running===!1||s.preQueueIdx===s.preQueue.length?(r.cancel(),e()):(E.style.backgroundColor=s.preQueue[s.preQueueIdx],s.preQueueIdx++,v.textContent="Pre-Start")},1e3)}),n=()=>new Promise(e=>{s.queue=W(s.colourPatchesPerChannel,s.colorSpace);const r=O(()=>{s.running===!1||s.queueIdx===s.queue.length?(r.cancel(),k(),e()):(E.style.backgroundColor=s.queue[s.queueIdx],s.queueIdx++,v.textContent=`${s.queue.length-s.queueIdx}`)},s.interval)});s.running=!0,t().then(()=>n())}function k(){s.running=!1,s.preQueueIdx=0,s.queueIdx=0,E.style.backgroundColor="",v.textContent="Finished"}function me(){document.fullscreenElement?(document.exitFullscreen(),g.textContent="Fullscreen"):(document.documentElement.requestFullscreen().catch(t=>{console.error(`Error attempting to enable fullscreen: ${t.message}`)}),g.textContent="Exit Fullscreen")}document.addEventListener("fullscreenchange",()=>{document.fullscreenElement?g.textContent="Exit Fullscreen":g.textContent="Fullscreen"});function pe(t){s.running===!1&&(s.colorSpace=t)}function ge(t){s.running===!1&&(s.colourPatchesPerChannel=t,A())}function A(){const t=Math.pow(s.colourPatchesPerChannel,3),n=t*s.interval/1e3+7,e=Math.floor(n/60),r=Math.round(n%60);ue.textContent=`${t.toLocaleString()} total patches (~${e}m ${r}s)`}function he(){const t=p.querySelectorAll("option"),n=window.matchMedia("(color-gamut: p3)").matches,e=window.matchMedia("(color-gamut: rec2020)").matches;t.forEach(o=>{const a=o.getAttribute("data-gamut");(a==="p3"&&!n||a==="rec2020"&&!e)&&(o.disabled=!0,o.textContent+=" (Not Supported)")});const r=p.querySelector(`option[value="${s.colorSpace}"]`);r&&r.disabled&&(s.colorSpace="srgb",p.value="srgb")}function we(){he(),p.value=s.colorSpace,L.value=s.colourPatchesPerChannel.toString(),A()}we();
